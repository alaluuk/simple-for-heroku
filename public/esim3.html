<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Kirjat</h1>
    <button onclick="getAllBooks()">Kaikki kirjat</button>
    <p id="allbooks"></p>
</body>
<script>
    function getAllBooks() {
        //console.log("funktiota kutsuttu");
        const xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                console.log(this.responseText);
                let books=JSON.parse(this.response);
                let row="<ul>";
                    books.map(book=>{
                        row+="<li>"+book.name+"</li>"
                    });
                row+="</ul>";
                document.getElementById("allbooks").innerHTML=row;
            }
            else {
                console.log("Can not get data");
            }
        }
        //xhttp.open("GET", "http://localhost:3001/book");
        xhttp.open("GET", "https://bcamp-simple-backend.herokuapp.com/book");
        xhttp.send();
    }
</script>

</html>